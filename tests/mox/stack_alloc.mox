$(unit, unit)
> (unit *[u=u1 a=local] unit)
> mode vars
>   u1 ∈ {aliased, unique}

$left(unit)
> (unit +[u=u1 a=local] ?428)
> where
>   ?428 in {u=u2; c=c1; l=l1; p=p1; a=a1}
> mode vars
>   u1 ∈ {aliased, unique}
>   a1 ∈ {global, local, regional}
>   p1 ∈ {non-portable, portable}
>   l1 ∈ {many, never, once}
>   c1 ∈ {contended, shared, uncontended}
>   u2 ∈ {aliased, unique}
> mode rels
>   (u2,u1) ∉ {(unique,aliased)}

$fun x => x
> (?429 ->[a=local l=l1 p=p1] ?429)
> mode vars
>   p1 ∈ {non-portable, portable}
>   l1 ∈ {many, never, once}

region unit
> unit

region $(unit, unit)
> error: relation became empty

region
  let x = $(unit, unit) in
  let (a,b) = x in a
> unit

region
  let x = $(unit, unit) in
  let (a,b) = x in (unit, unit)
> (unit *[u=u1 a=a1] unit)
> mode vars
>   a1 ∈ {global, local, regional}
>   u1 ∈ {aliased, unique}

region
  let x = $(unit, unit) in
  let y = (x, x) in y
> error: relation became empty

region
  let x = $(unit, unit) in
  let y = (x, x) in y
> error: relation became empty

region
  let a = (unit, unit) in 
  let x = $(a, unit) in
  let y = (x, x) in 
  let (z,w) = y in
  let (e,f) = z in e
> (unit *[u=u1 a=a1] unit)
> mode vars
>   a1 ∈ {global, local, regional}
>   u1 ∈ {aliased, unique}

(* CR jujacobs: bug! *)
region
  let x = $(unit, unit) in
  fun y => x
> (?459 ->[a=a2 l=l1 p=p1] (unit *[u=u1 a=a1] unit))
> mode vars
>   a1 ∈ {global, local, regional}
>   u1 ∈ {aliased, unique}
>   p1 ∈ {non-portable, portable}
>   l1 ∈ {many, never, once}
>   a2 ∈ {global, local, regional}

(* CR jujacobs: bug! *)
let a = (region
  let x = $(unit, unit) in
  fun y => x) 
in a unit
> (unit *[u=u1 a=a1] unit)
> mode vars
>   a1 ∈ {global, local, regional}
>   u1 ∈ {aliased, unique}

let unique_pair = ((unit, unit) : (unit *[unique local] unit)) in
let! (x, y) = unique_pair in
x
> unit

let unique_sum = ((left(unit)) : (unit +[unique local] unit)) in
match! unique_sum with left(x) => x | right(y) => y
> unit

let p = (unit, unit) in
let q = (p,p) in
let! (x,y) = p in x
> error: relation became empty

let p = (unit, unit) in
let q = (p,p) in
let! (x,y) = q in 
let (a,b) = x in a
> unit

let p = (unit, unit) in
let q = (p,p) in
let! (x,y) = q in 
let! (a,b) = x in a
> error: relation became empty
