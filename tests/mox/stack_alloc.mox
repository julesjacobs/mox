$(unit, unit)
> (unit *[u=u1 a=a1 r=0] unit)
> mode vars
>   a1 ∈ {borrowed, global, local, regional}
>   u1 ∈ {aliased, unique}

$left(unit)
> (unit +[u=u1 a=a1 r=0] 'a)
> where
>   'a in {u=u2; c=c1; l=l1; p=p1; a=a2; r=r1}
> mode vars
>   a1 ∈ {borrowed, global, local, regional}
>   u1 ∈ {aliased, unique}
>   r1 ∈ [0, inf]
>   a2 ∈ {borrowed, global, local, regional}
>   p1 ∈ {nonportable, portable}
>   l1 ∈ {many, never, once}
>   c1 ∈ {contended, shared, uncontended}
>   u2 ∈ {aliased, unique}
> mode rels
>   (u2,u1) ∉ {(unique,aliased)}
>   (a2,a1) ∈ {(global,global), (global,regional), (global,local), (regional,regional), (regional,local), (local,local), (borrowed,borrowed)}

$fun x => x
> ('a ->[a=local r=0 l=l1 p=p1] 'a)
> mode vars
>   p1 ∈ {nonportable, portable}
>   l1 ∈ {many, never, once}

region unit
> unit

region $(unit, unit)
> error: mode solver detected Variable 'regionality' Inconsistent: Lower(1) > Upper(0)

region
  let x = $(unit, unit) in
  let (a,b) = x in a
> unit

region
  let x = $(unit, unit) in
  let (a,b) = x in (unit, unit)
> (unit *[u=u1 a=global r=r1] unit)
> mode vars
>   r1 ∈ [0, inf]
>   u1 ∈ {aliased, unique}

region
  let x = $(unit, unit) in
  let y = (x, x) in y
> error: mode solver detected Variable 'regionality' Inconsistent: Lower(1) > Upper(0)

region
  let x = $(unit, unit) in
  let y = (x, x) in y
> error: mode solver detected Variable 'regionality' Inconsistent: Lower(1) > Upper(0)

region
  let a = (unit, unit) in 
  let x = $(a, unit) in
  let y = (x, x) in 
  let (z,w) = y in
  let (e,f) = z in e
> (unit *[u=aliased a=global r=r1] unit)
> mode vars
>   r1 ∈ [0, inf]

region
  let x = $(unit, unit) in
  fun y => x
> ('a ->[a=global r=r2 l=l1 p=p1] (unit *[u=u1 a=a1 r=r1] unit))
> where
>   'a <= 'b
> mode vars
>   r1 ∈ [0, inf]
>   a1 ∈ {borrowed, global, local, regional}
>   u1 ∈ {aliased, unique}
>   p1 ∈ {nonportable, portable}
>   l1 ∈ {many, never, once}
>   r2 ∈ [0, inf]

let a = (region
  let x = $(unit, unit) in
  fun y => x) 
in a unit
> (unit *[u=u1 a=a1 r=r1] unit)
> mode vars
>   r1 ∈ [0, inf]
>   a1 ∈ {borrowed, global, local, regional}
>   u1 ∈ {aliased, unique}

let unique_pair = ((unit, unit) : (unit *[unique local] unit)) in
let! (x, y) = unique_pair in
x
> unit

let unique_sum = ((left(unit)) : (unit +[unique local] unit)) in
match! unique_sum with left(x) => x | right(y) => y
> unit

let p = (unit, unit) in
let q = (p,p) in
let! (x,y) = p in x
> error: mode solver detected uniqueness inconsistency

let p = (unit, unit) in
let q = (p,p) in
let! (x,y) = q in 
let (a,b) = x in a
> unit

let p = (unit, unit) in
let q = (p,p) in
let! (x,y) = q in 
let! (a,b) = x in a
> error: mode solver detected uniqueness inconsistency
